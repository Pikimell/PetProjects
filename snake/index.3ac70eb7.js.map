{"mappings":"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","sources":["node_modules/@swc/helpers/src/_define_property.mjs","src/snake/snake.js","node_modules/@swc/helpers/src/_class_extract_field_descriptor.mjs","node_modules/@swc/helpers/src/_class_apply_descriptor_get.mjs","node_modules/@swc/helpers/src/_class_private_field_get.mjs","node_modules/@swc/helpers/src/_check_private_redeclaration.mjs","node_modules/@swc/helpers/src/_class_private_field_init.mjs","src/snake/map.js","src/snake/index.js"],"sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","const DIRECTIONS = {\n  UP: \"UP\",\n  DOWN: \"DOWN\",\n  LEFT: \"LEFT\",\n  RIGHT: \"RIGHT\",\n};\n\nexport class Snake {\n  direction = DIRECTIONS.RIGHT;\n  speed = 1;\n  snakeBody = [];\n  snakeHead = new Point();\n  lengthSnake = 1;\n\n  constructor(snakeLen) {\n    this.snakeBody.push(this.snakeHead);\n    for (let i = 0; i < snakeLen; i++) {\n      this.snakeBody.push(new Point());\n      this.lengthSnake++;\n    }\n  }\n\n  updateSnakePosition() {\n    const lastElem = this.snakeBody.pop();\n    lastElem.x = this.snakeHead.x;\n    lastElem.y = this.snakeHead.y;\n    this.snakeBody.splice(1, 0, lastElem);\n  }\n\n  move() {\n    const direction = this.direction;\n    switch (direction) {\n      case DIRECTIONS.UP:\n        this.snakeHead.y -= this.speed;\n        break;\n      case DIRECTIONS.DOWN:\n        this.snakeHead.y += this.speed;\n        break;\n      case DIRECTIONS.RIGHT:\n        this.snakeHead.x += this.speed;\n        break;\n      case DIRECTIONS.LEFT:\n        this.snakeHead.x -= this.speed;\n        break;\n    }\n  }\n\n  cahngeDirection(keyCode) {\n    switch (keyCode) {\n      case \"KeyW\":\n        if (this.direction != DIRECTIONS.DOWN) this.direction = DIRECTIONS.UP;\n        break;\n\n      case \"KeyS\":\n        if (this.direction != DIRECTIONS.UP) this.direction = DIRECTIONS.DOWN;\n        break;\n\n      case \"KeyA\":\n        if (this.direction != DIRECTIONS.RIGHT)\n          this.direction = DIRECTIONS.LEFT;\n        break;\n\n      case \"KeyD\":\n        if (this.direction != DIRECTIONS.LEFT)\n          this.direction = DIRECTIONS.RIGHT;\n        break;\n\n      case \"ArrowDown\":\n        if (this.direction != DIRECTIONS.DOWN) this.direction = DIRECTIONS.UP;\n        break;\n\n      case \"ArrowUp\":\n        if (this.direction != DIRECTIONS.UP) this.direction = DIRECTIONS.DOWN;\n        break;\n\n      case \"ArrowRight\":\n        if (this.direction != DIRECTIONS.RIGHT)\n          this.direction = DIRECTIONS.LEFT;\n        break;\n\n      case \"ArrowLeft\":\n        if (this.direction != DIRECTIONS.LEFT)\n          this.direction = DIRECTIONS.RIGHT;\n        break;\n    }\n  }\n\n  resetSnake() {\n    this.direction = DIRECTIONS.RIGHT;\n    this.snakeHead = new Point();\n    this.snakeBody = [];\n    this.snakeBody.push(this.snakeHead);\n    for (let i = 0; i < 5; i++) {\n      this.snakeBody.push(new Point());\n    }\n  }\n\n  increaseSnake() {\n    const lastElem = { ...this.snakeBody[this.lengthSnake - 1] };\n    this.snakeBody.push(lastElem);\n    this.lengthSnake++;\n  }\n}\n\nclass Point {\n  x;\n  y;\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n}\n","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\n","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\n","import classExtractFieldDescriptor from './_class_extract_field_descriptor.mjs';\nimport classApplyDescriptorGet from './_class_apply_descriptor_get.mjs';\n\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}\n","export default function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\n","import _checkPrivateRedeclaration from \"./_check_private_redeclaration.mjs\";\n\nexport default function _classPrivateFieldInit(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\n","export class SnakeMap {\n  lenX;\n  lenY;\n  snake;\n  canvas;\n  rectCanvas;\n  #snakeWidth = 20;\n  food;\n\n  constructor(snake, lenX, lenY, canvas) {\n    this.snake = snake;\n    this.lenX = lenX;\n    this.lenY = lenY;\n    this.canvas = canvas.getContext(\"2d\");\n\n    this.rectCanvas = {\n      width: canvas.width,\n      height: canvas.height,\n    };\n\n    this.canvas.fillStyle = \"green\";\n    this.genereteFood();\n  }\n\n  showMap() {\n    this.canvas.clearRect(0, 0, this.rectCanvas.width, this.rectCanvas.height);\n\n    this.showFood();\n    this.snake.updateSnakePosition();\n    this.snake.move();\n    this.isSheFull();\n    this.snake.snakeBody.forEach(({ x, y }) => {\n      this.canvas.fillStyle = \"red\";\n      this.canvas.fillRect(\n        x * this.#snakeWidth,\n        y * this.#snakeWidth,\n        this.#snakeWidth,\n        this.#snakeWidth\n      );\n      this.canvas.fillStyle = \"black\";\n      this.canvas.fillRect(\n        x * this.#snakeWidth + 2,\n        y * this.#snakeWidth + 2,\n        this.#snakeWidth - 4,\n        this.#snakeWidth - 4\n      );\n    });\n\n    // mirror clone\n    this.snake.snakeBody.forEach(({ x, y }) => {\n      this.canvas.fillStyle = \"red\";\n      this.canvas.fillRect(\n        (this.lenX - x) * this.#snakeWidth,\n        (this.lenY - y) * this.#snakeWidth,\n        this.#snakeWidth,\n        this.#snakeWidth\n      );\n      this.canvas.fillStyle = \"black\";\n      this.canvas.fillRect(\n        (this.lenX - x) * this.#snakeWidth + 2,\n        (this.lenY - y) * this.#snakeWidth + 2,\n        this.#snakeWidth - 4,\n        this.#snakeWidth - 4\n      );\n    });\n  }\n\n  genereteFood() {\n    const x = Math.round(Math.random() * this.lenX);\n    const y = Math.round(Math.random() * this.lenY);\n    this.food = { x, y };\n  }\n\n  showFood() {\n    this.canvas.fillStyle = \"green\";\n    this.canvas.fillRect(\n      this.food.x * this.#snakeWidth,\n      this.food.y * this.#snakeWidth,\n      this.#snakeWidth,\n      this.#snakeWidth\n    );\n  }\n\n  isSheFull() {\n    // const info = `${this.snake.snakeHead.x}-${this.food.x}\\n${this.snake.snakeHead.y}-${this.food.y}`;\n    // console.log(info);\n    if (\n      this.snake.snakeHead.x === this.food.x &&\n      this.snake.snakeHead.y === this.food.y\n    ) {\n      this.genereteFood();\n      this.snake.increaseSnake();\n    }\n\n    if (\n      this.lenX - this.snake.snakeHead.x === this.food.x &&\n      this.lenY - this.snake.snakeHead.y === this.food.y\n    ) {\n      this.genereteFood();\n      this.snake.increaseSnake();\n    }\n  }\n\n  gameOver() {\n    const { x, y } = this.snake.snakeHead;\n    if (x < 0) return true;\n    if (y < 0) return true;\n    if (x > this.lenX) return true;\n    if (y > this.lenY) return true;\n\n    return false;\n  }\n\n  clearMap() {\n    this.canvas.clearRect(0, 0, this.rectCanvas.width, this.rectCanvas.height);\n  }\n}\n","import { Snake } from \"./snake\";\nimport { SnakeMap } from \"./map\";\n\nconst refs = {\n  canvas: document.querySelector(\".js-canvas\"),\n  startBtn: document.querySelector(\".js-start-btn\"),\n};\n\nconst options = {\n  idInterval: null,\n  fps: 100,\n};\n\nconst snake = new Snake(25);\nconst map = new SnakeMap(snake, 39, 34, refs.canvas);\n\nrefs.startBtn.addEventListener(\"click\", (e) => {\n  if (options.idInterval) {\n    clearInterval(options.idInterval);\n    options.idInterval = null;\n  } else {\n    options.idInterval = setInterval(() => {\n      if (!map.gameOver()) {\n        map.showMap();\n      } else {\n        map.clearMap();\n        clearInterval(options.idInterval);\n        options.idInterval = null;\n        snake.resetSnake();\n        alert(\"GAME OVER\");\n      }\n    }, options.fps);\n  }\n});\n\ndocument.addEventListener(\"keydown\", (e) => {\n  snake.cahngeDirection(e.code);\n});\n"],"names":["$9139f4380ced0e7c$export$2e2bcd8739ae039","obj","key","value","Object","defineProperty","enumerable","configurable","writable","$b4a69f0c39d9a841$var$DIRECTIONS","$b4a69f0c39d9a841$var$Point","constructor","x","y","this","$99d26d6ae153323e$export$2e2bcd8739ae039","receiver","privateMap","action","has","TypeError","get","$77325facfa382e54$export$2e2bcd8739ae039","descriptor","call","$92121ed38d27acb0$export$2e2bcd8739ae039","$dba1998b20ced464$export$2e2bcd8739ae039","privateCollection","$7efc65a322f137af$export$2e2bcd8739ae039","set","$4e8db46f512bf194$var$_snakeWidth","WeakMap","$813bdfadef2411ce$var$refs","canvas","document","querySelector","startBtn","$813bdfadef2411ce$var$options","idInterval","fps","$813bdfadef2411ce$var$snake","updateSnakePosition","lastElem","snakeBody","pop","snakeHead","splice","move","direction","speed","cahngeDirection","keyCode","resetSnake","push","i","increaseSnake","lengthSnake","snakeLen","$813bdfadef2411ce$var$map","showMap","clearRect","rectCanvas","width","height","showFood","snake","isSheFull","forEach","fillStyle","fillRect","lenX","lenY","genereteFood","Math","round","random","food","gameOver","clearMap","getContext","addEventListener","e","clearInterval","setInterval","alert","code"],"version":3,"file":"index.3ac70eb7.js.map"}