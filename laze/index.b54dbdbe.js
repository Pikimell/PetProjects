!function(){function t(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}function e(t,e){return e.get?e.get.call(t):e.value}function i(i,s){return e(i,t(i,s,"get"))}function s(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function a(t,e,i){s(t,e),e.set(t,i)}function h(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}function n(e,i,s){return h(e,t(e,i,"set"),s),s}function r(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}function o(t,e){s(t,e),e.add(t)}var l=new WeakMap,c=new WeakMap,u=new WeakMap,w=new WeakMap,v=new WeakMap,d=new WeakMap,f=new WeakSet;function g(t,e,s){i(this,d).fillStyle=t,i(this,d).fillRect(e*i(this,v),s*i(this,v),i(this,v),i(this,v))}var m=new WeakMap,p=new WeakMap,b=new WeakMap,k=new WeakSet,z=new WeakSet,W=new WeakSet,y=new WeakSet;class L{setMap(t){n(this,p,t)}move(t){switch(t){case this.direction.UP:r(this,W,S).call(this);break;case this.direction.DOWN:r(this,y,E).call(this);break;case this.direction.LEFT:r(this,k,x).call(this);break;case this.direction.RIGHT:r(this,z,M).call(this)}}moveRandom(){const t=Math.floor(4*Math.random()),e=Object.values(i(this,b))[t];this.move(e)}get direction(){return{...i(this,b)}}get position(){return i(this,m)}resetPosition(){i(this,m).x=1,i(this,m).y=1}constructor(){o(this,k),o(this,z),o(this,W),o(this,y),a(this,m,{writable:!0,value:{x:1,y:1}}),a(this,p,{writable:!0,value:[]}),a(this,b,{writable:!0,value:{UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"}})}}function x(){i(this,m).x>2&&(i(this,m).x-=2)}function M(){i(this,m).x<i(this,p)[0].length-3&&(i(this,m).x+=2)}function S(){i(this,m).y>2&&(i(this,m).y-=2)}function E(){i(this,m).y<i(this,p).length-3&&(i(this,m).y+=2)}const T={controlsForm:document.querySelector(".js-control-elements"),canvas:document.querySelector(".js-canvas"),generateBtn:document.querySelector(".js-generate-btn"),saveBtn:document.querySelector(".js-save-btn")},R=new class{initLaze(){i(this,d).clearRect(0,0,i(this,d).canvas.width,i(this,d).canvas.height);const t=i(this,c);for(;t.length>0;)t.shift();for(let e=0;e<i(this,w);e++){t.push([]);for(let s=0;s<i(this,u);s++)t[e].push("#")}}showGenerateLaze(){const t=setInterval((()=>{let{x:e,y:s}=this.user.position;this.user.moveRandom();let{x:a,y:h}=this.user.position,n=(e+a)/2,r=(s+h)/2;"#"===i(this,c)[h][a]&&(i(this,c)[r][n]=" "),i(this,c)[h][a]=" ",this.isLazeFill()&&(clearInterval(t),this.user.resetPosition()),this.showLaze()}),10)}generateLaze(){for(;!this.isLazeFill();){let{x:t,y:e}=this.user.position;this.user.moveRandom();let{x:s,y:a}=this.user.position,h=(t+s)/2,n=(e+a)/2;"#"===i(this,c)[a][s]&&(i(this,c)[n][h]=" "),i(this,c)[a][s]=" "}this.user.resetPosition(),this.showLaze()}showLaze(){const t=i(this,c),e=this.user.position;for(let e=0;e<i(this,w);e++)for(let s=0;s<i(this,u);s++){let i;switch(t[e][s]){case" ":i="white";break;case"#":i="black";break;case"*":i="red";break;default:i="tomato"}r(this,f,g).call(this,i,s,e)}r(this,f,g).call(this,"white",i(this,c)[0].length-1,i(this,c).length-2),e.x>1&&e.y>1&&r(this,f,g).call(this,"red",e.x,e.y)}createLaze(t=!1){this.initLaze(),this.showLaze(),t?this.generateLaze():this.showGenerateLaze()}isLazeFill(){for(let t=1;t<i(this,w);t+=2)for(let e=1;e<i(this,u);e+=2)if("#"===i(this,c)[t][e])return!1;return!0}get blockWidth(){return i(this,v)}setWidth(t){t>5&&(n(this,u,+t%2==0?+t+1:t),i(this,u)>i(this,l)&&n(this,u,i(this,l)))}setHeight(t){t>5&&(n(this,w,+t%2==0?+t+1:t),i(this,w)>i(this,l)&&n(this,w,i(this,l)))}resetSize(t,e){this.setHeight(t),this.setWidth(e)}constructor(t=0,e=0,s){var h,r,g;o(this,f),a(this,l,{writable:!0,value:499}),a(this,c,{writable:!0,value:[]}),a(this,u,{writable:!0,value:0}),a(this,w,{writable:!0,value:0}),a(this,v,{writable:!0,value:20}),a(this,d,{writable:!0,value:void 0}),h=this,r="user",g=new L,r in h?Object.defineProperty(h,r,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[r]=g,n(this,w,e),n(this,u,t),s.height=e*i(this,v),s.width=t*i(this,v),n(this,d,s.getContext("2d")),this.user.setMap(i(this,c))}}(25,25,T.canvas);T.controlsForm.addEventListener("submit",(t=>{t.preventDefault();const e=t.target.elements["laze-height"].value,i=t.target.elements["laze-width"].value;T.canvas.height=(+e+1)*R.blockWidth,T.canvas.width=(+i+1)*R.blockWidth,R.resetSize(e,i),R.createLaze()})),T.generateBtn.addEventListener("click",(t=>{const e=t.target.closest("form"),i=e.elements["laze-height"].value,s=e.elements["laze-width"].value;T.canvas.height=(+i+1)*R.blockWidth,T.canvas.width=(+s+1)*R.blockWidth,R.resetSize(i,s),R.createLaze(!0)})),T.saveBtn.addEventListener("click",(()=>{const t=T.canvas.toDataURL("image/png");window.open("about:blank","image from canvas").document.write("<img src='"+t+"' alt='from canvas'/>")}))}();
//# sourceMappingURL=index.b54dbdbe.js.map
