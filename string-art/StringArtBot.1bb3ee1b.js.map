{"mappings":"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","sources":["src/string-art/js/speaker.js","src/string-art/js/stringAtrBot.js"],"sourcesContent":["const lang = \"ru-RU\"; // Задаём стандартный язык произношения\n\nexport function speak(text) {\n  // Функция речи\n  var speech = window.speechSynthesis, // Объявляем переменные\n    voice = \"\",\n    ourvoice = []; // Сюда будем складывать доступные звуки браузера\n  if (0 === ourvoice.length) {\n    // Если равно нулю, то...\n    var voices = speech.getVoices(); // Получаем все языки\n  }\n  for (var i = 0; i < voices.length; i++) {\n    // Находим указанный в списке\n    if (lang == voices[i].lang) {\n      voice = voices[i]; // Ставим язык как параметр\n    }\n  }\n  var readme = new SpeechSynthesisUtterance(text); // вводим текст\n  readme.voice = voice; // Задаём язык произношения\n  speech.speak(readme); // Произносим\n}\n","import { speak } from \"./speaker\";\nlet COUNT_POINTS = 294;\nconst refs = {\n  formElem: document.querySelector(\".js-form\"),\n  form1Elem: document.querySelector(\".js-form1\"),\n  canvas: document.querySelector(\"canvas\"),\n  btnElems: document.querySelector(\".js-btn\"),\n};\nconst ctx = refs.canvas.getContext(\"2d\");\nctx.lineWidth = 1;\nlet arrPoints = [];\n\nconst drawPoints = {\n  currentPoint: 0,\n};\n\nrefs.formElem.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const data = e.target.elements.data.value;\n  if (data) {\n    loadData(data);\n  } else {\n    loadPoint();\n  }\n});\nrefs.form1Elem.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const point = Number(e.target.elements.point.value);\n  setPoint(point);\n});\n\ndocument.body.addEventListener(\"keydown\", (e) => {\n  if (e.code === \"Enter\") {\n    loadPoint();\n  } else if (e.code === \"ArrowLeft\") {\n    prevPoint();\n  } else if (e.code === \"ArrowRight\" || e.code === \"Space\") {\n    nextPoint();\n  }\n});\n\nfunction loadPoint() {\n  drawPoints.currentPoint = 0;\n  if (arrPoints.length === 0) {\n    arrPoints = JSON.parse(localStorage.getItem(\"dataPoint\"));\n    drawPoints.currentPoint = Number(localStorage.getItem(\"lastPoint\"));\n  }\n  draw();\n}\nfunction nextPoint() {\n  drawPoints.currentPoint++;\n  draw();\n}\nfunction prevPoint() {\n  drawPoints.currentPoint--;\n  draw();\n}\n\nfunction saveData() {\n  localStorage.setItem(\"points\", JSON.stringify(drawPoints));\n  localStorage.setItem(\"lastPoint\", drawPoints.currentPoint);\n}\nfunction loadData(dataString) {\n  arrPoints = dataString.split(\"\\n\");\n  localStorage.setItem(\"dataPoint\", JSON.stringify(arrPoints));\n  localStorage.setItem(\"lastPoint\", 0);\n}\n\nfunction draw() {\n  saveData();\n  const prevPoint = +(arrPoints[drawPoints.currentPoint - 1] || 0);\n  const currentPoint = +(arrPoints[drawPoints.currentPoint] || 0);\n  const nextPoint = +(arrPoints[drawPoints.currentPoint + 1] || 0);\n\n  refs.form1Elem.elements.point.value = drawPoints.currentPoint;\n  // drawLine(\n  //   ctx,\n  //   currentPoint,\n  //   nextPoint,\n  //   COUNT_POINTS,\n  //   { x: refs.canvas.width / 2, y: refs.canvas.height / 2 },\n  //   refs.canvas.width / 2 - 5\n  // );\n  ctx.clearRect(0, 0, refs.canvas.width, refs.canvas.height);\n  drawCircle(\n    ctx,\n    refs.canvas.width / 2 - 5,\n    COUNT_POINTS,\n    { x: refs.canvas.width / 2, y: refs.canvas.height / 2 },\n    prevPoint,\n    currentPoint,\n    nextPoint\n  );\n\n  try {\n    speak(arrPoints[drawPoints.currentPoint]);\n  } catch {\n    console.log(\"err\");\n  }\n  drawText(\n    ctx,\n    prevPoint,\n    {\n      x: refs.canvas.width / 2,\n      y: refs.canvas.height / 2 - 200,\n    },\n    40\n  );\n  drawText(ctx, currentPoint, {\n    x: refs.canvas.width / 2,\n    y: refs.canvas.height / 2,\n  });\n  drawText(\n    ctx,\n    nextPoint,\n    {\n      x: refs.canvas.width / 2,\n      y: refs.canvas.height / 2 + 200,\n    },\n    40\n  );\n}\n\nfunction drawText(ctx, point, { x, y }, font = 100) {\n  ctx.fillStyle = \"black\";\n  ctx.font = `${font}px serif`;\n  ctx.textAlign = \"center\";\n  ctx.fillText(point, x, y);\n}\n\nfunction drawCircle(ctx, r, countPoint, center, ...points) {\n  const radian = (Math.PI * 2) / countPoint;\n\n  for (let i = 0; i < countPoint; i++) {\n    let angle = radian * (COUNT_POINTS - (i - Math.round(COUNT_POINTS / 4)));\n    const endPoint = {\n      x: r * Math.sin(angle) + center.x,\n      y: r * Math.cos(angle) + center.y,\n    };\n\n    const minR = i % 10 == 0 ? 4 : 2;\n    ctx.fillStyle = \"black\";\n    ctx.beginPath();\n    ctx.ellipse(endPoint.x, endPoint.y, minR, minR, 0, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  for (let i = 0; i < points.length; i++) {\n    let angle =\n      radian * (COUNT_POINTS - (+points[i] - Math.round(COUNT_POINTS / 4)));\n    const endPoint = {\n      x: r * Math.sin(angle) + center.x,\n      y: r * Math.cos(angle) + center.y,\n    };\n    let minR = 5;\n    switch (i) {\n      case 0:\n        ctx.fillStyle = \"green\";\n        break;\n      case 1:\n        ctx.fillStyle = \"red\";\n        minR = 15;\n        break;\n      case 2:\n        ctx.fillStyle = \"blue\";\n        break;\n    }\n\n    ctx.beginPath();\n    ctx.ellipse(endPoint.x, endPoint.y, minR, minR, 0, 0, Math.PI * 2);\n    ctx.fill();\n  }\n}\n\nfunction drawLine(ctx, currentPoint, nextPoint, countPoint, center, r) {\n  // currentPoint -= 60;\n  // nextPoint -= 60;\n\n  const radian = (Math.PI * 2) / countPoint;\n\n  const startPoint = {\n    x: r * Math.sin(radian * currentPoint) + center.x,\n    y: r * Math.cos(radian * currentPoint) + center.y,\n  };\n  const endPoint = {\n    x: r * Math.sin(radian * nextPoint) + center.x,\n    y: r * Math.cos(radian * nextPoint) + center.y,\n  };\n\n  ctx.beginPath(); // Start a new path\n  ctx.moveTo(startPoint.x, startPoint.y); // Move the pen to (30, 50)\n  ctx.lineTo(endPoint.x, endPoint.y); // Draw a line to (150, 100)\n  ctx.stroke();\n}\n\nfunction setPoint(point) {\n  drawPoints.currentPoint = point;\n  draw();\n}\n\nrefs.btnElems.addEventListener(\"click\", (e) => {\n  if (e.target != e.currentTarget) {\n    const btn = e.target.closest(\"button\");\n    const value = btn.dataset.value;\n\n    if (value == \"prev\") {\n      prevPoint();\n    } else {\n      nextPoint();\n    }\n  }\n});\n\nrefs.canvas.addEventListener(\"click\", () => {\n  nextPoint();\n});\n"],"names":["$95b605446b060f58$export$e62e8864abfee904","text","speech","window","speechSynthesis","voice","length","voices","getVoices","i","lang","readme","SpeechSynthesisUtterance","speak","$c8b4005971d56ebc$var$COUNT_POINTS","$c8b4005971d56ebc$var$refs","formElem","document","querySelector","form1Elem","canvas","btnElems","$c8b4005971d56ebc$var$ctx","getContext","lineWidth","$c8b4005971d56ebc$var$arrPoints","$c8b4005971d56ebc$var$drawPoints","currentPoint","$c8b4005971d56ebc$var$loadPoint","JSON","parse","localStorage","getItem","Number","$c8b4005971d56ebc$var$draw","$c8b4005971d56ebc$var$nextPoint","$c8b4005971d56ebc$var$prevPoint","setItem","stringify","prevPoint","nextPoint","elements","point","value","clearRect","width","height","ctx","r","countPoint","center","points","radian","Math","PI","angle","round","endPoint","x","sin","y","cos","minR","fillStyle","beginPath","ellipse","fill","i1","angle1","endPoint1","minR1","$c8b4005971d56ebc$var$drawCircle","console","log","$c8b4005971d56ebc$var$drawText","font","textAlign","fillText","addEventListener","e","preventDefault","data","target","split","$c8b4005971d56ebc$var$setPoint","body","code","currentTarget","closest","dataset"],"version":3,"file":"StringArtBot.1bb3ee1b.js.map"}