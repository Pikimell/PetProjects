function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequireb035;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequireb035=a),a.register("cC52K",(function(t,n){e(t.exports,"PARAMS",(function(){return o})),e(t.exports,"nextPoint",(function(){return d}));var r=a("323HL");const o={COUNT_POINTS:100,DELAY_TIME:5},i={formElem:document.querySelector(".js-form"),form1Elem:document.querySelector(".js-form1"),canvas:document.querySelector("canvas"),btnElems:document.querySelector(".js-btn"),visibleBtn:document.querySelector(".js-visible-canvas"),audioElem:document.querySelector(".js-audio"),playerElem:document.querySelector(".js-player")},l=i.canvas.getContext("2d");l.lineWidth=1;let c=[];const s={currentPoint:0};function u(){s.currentPoint=0,0===c.length&&(c=JSON.parse(localStorage.getItem("dataPoint")),s.currentPoint=Number(localStorage.getItem("lastPoint"))),v()}function d(){s.currentPoint++,v()}function f(){s.currentPoint--,v()}function v(){localStorage.setItem("points",JSON.stringify(s)),localStorage.setItem("lastPoint",s.currentPoint);const e=+(c[s.currentPoint-1]||0),t=+(c[s.currentPoint]||0),n=+(c[s.currentPoint+1]||0);i.form1Elem.elements.point.value=s.currentPoint,l.clearRect(0,0,i.canvas.width,i.canvas.height),function(e,t,n,r,...a){const i=2*Math.PI/n;for(let a=0;a<n;a++){let n=i*(o.COUNT_POINTS-(a-Math.round(o.COUNT_POINTS/4)));const l={x:t*Math.sin(n)+r.x,y:t*Math.cos(n)+r.y},c=a%10==0?4:2;e.fillStyle="black",e.beginPath(),e.ellipse(l.x,l.y,c,c,0,0,2*Math.PI),e.fill()}for(let n=0;n<a.length;n++){let l=i*(o.COUNT_POINTS-(+a[n]-Math.round(o.COUNT_POINTS/4)));const c={x:t*Math.sin(l)+r.x,y:t*Math.cos(l)+r.y};let s=5;switch(n){case 0:e.fillStyle="green";break;case 1:e.fillStyle="red",s=15;break;case 2:e.fillStyle="blue"}e.beginPath(),e.ellipse(c.x,c.y,s,s,0,0,2*Math.PI),e.fill()}}(l,i.canvas.width/2-5,o.COUNT_POINTS,{x:i.canvas.width/2,y:i.canvas.height/2},e,t,n);try{(0,r.speak)(c[s.currentPoint])}catch{console.log("err")}g(l,e,{x:i.canvas.width/2,y:i.canvas.height/2-200},40),g(l,t,{x:i.canvas.width/2,y:i.canvas.height/2}),g(l,n,{x:i.canvas.width/2,y:i.canvas.height/2+200},40)}function g(e,t,{x:n,y:r},a=100){e.fillStyle="black",e.font=`${a}px serif`,e.textAlign="center",e.fillText(t,n,r)}i.visibleBtn.addEventListener("change",(e=>{e.target.checked?i.canvas.style.visibility="hidden":i.canvas.style.visibility=""})),i.formElem.addEventListener("submit",(e=>{e.preventDefault();const t=e.target.elements.data.value;t?(c=t.split("\n"),localStorage.setItem("dataPoint",JSON.stringify(c)),localStorage.setItem("lastPoint",0)):u()})),i.form1Elem.addEventListener("submit",(e=>{e.preventDefault();const t=Number(e.target.elements.point.value),n=Number(e.target.elements.count.value),r=Number(e.target.elements.delay.value);o.COUNT_POINTS=n||o.COUNT_POINTS,o.DELAY_TIME=r||o.DELAY_TIME,function(e){s.currentPoint=e,v()}(t||s.currentPoint)})),document.body.addEventListener("keydown",(e=>{"Enter"===e.code?u():"ArrowLeft"===e.code?f():"ArrowRight"!==e.code&&"Space"!==e.code||d()})),i.btnElems.addEventListener("click",(e=>{if(e.target!=e.currentTarget){"prev"==e.target.closest("button").dataset.value?f():d()}})),i.canvas.addEventListener("click",(()=>{d()})),i.audioElem.addEventListener("change",(e=>{const t=e.target.files[0];playerElem.src=URL.createObjectURL(t)}))})),a.register("323HL",(function(t,n){e(t.exports,"speak",(function(){return r}));function r(e){var t=window.speechSynthesis,n="";if(0===[].length)var r=t.getVoices();for(var a=0;a<r.length;a++)"ru-RU"==r[a].lang&&(n=r[a]);var o=new SpeechSynthesisUtterance(e);o.voice=n,t.speak(o)}})),a("cC52K");
//# sourceMappingURL=StringArtBot.f9ecc88c.js.map
