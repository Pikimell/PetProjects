{"mappings":"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","sources":["src/string-art/js/speaker.js","src/string-art/js/stringAtrBot.js"],"sourcesContent":["const lang = \"ru-RU\"; // Задаём стандартный язык произношения\n\nexport function speak(text) {\n  // Функция речи\n  var speech = window.speechSynthesis, // Объявляем переменные\n    voice = \"\",\n    ourvoice = []; // Сюда будем складывать доступные звуки браузера\n  if (0 === ourvoice.length) {\n    // Если равно нулю, то...\n    var voices = speech.getVoices(); // Получаем все языки\n  }\n  for (var i = 0; i < voices.length; i++) {\n    // Находим указанный в списке\n    if (lang == voices[i].lang) {\n      voice = voices[i]; // Ставим язык как параметр\n    }\n  }\n  var readme = new SpeechSynthesisUtterance(text); // вводим текст\n  readme.voice = voice; // Задаём язык произношения\n  speech.speak(readme); // Произносим\n}\n","import { speak } from \"./speaker\";\nlet COUNT_POINTS = 387;\nconst refs = {\n  formElem: document.querySelector(\".js-form\"),\n  form1Elem: document.querySelector(\".js-form1\"),\n  canvas: document.querySelector(\"canvas\"),\n  btnElems: document.querySelector(\".js-btn\"),\n};\nconst ctx = refs.canvas.getContext(\"2d\");\nctx.lineWidth = 1;\nlet arrPoints = [];\n\nconst drawPoints = {\n  currentPoint: 0,\n};\n\nrefs.formElem.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const data = e.target.elements.data.value;\n  if (data) {\n    loadData(data);\n  } else {\n    loadPoint();\n  }\n});\nrefs.form1Elem.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  const point = Number(e.target.elements.point.value);\n  setPoint(point);\n});\n\ndocument.body.addEventListener(\"keydown\", (e) => {\n  if (e.code === \"Enter\") {\n    loadPoint();\n  } else if (e.code === \"ArrowLeft\") {\n    prevPoint();\n  } else if (e.code === \"ArrowRight\" || e.code === \"Space\") {\n    nextPoint();\n  }\n});\n\nfunction loadPoint() {\n  drawPoints.currentPoint = 0;\n  if (arrPoints.length === 0) {\n    arrPoints = JSON.parse(localStorage.getItem(\"dataPoint\"));\n    drawPoints.currentPoint = Number(localStorage.getItem(\"lastPoint\"));\n  }\n  draw();\n}\nfunction nextPoint() {\n  drawPoints.currentPoint++;\n  draw();\n}\nfunction prevPoint() {\n  drawPoints.currentPoint--;\n  draw();\n}\n\nfunction saveData() {\n  localStorage.setItem(\"points\", JSON.stringify(drawPoints));\n  localStorage.setItem(\"lastPoint\", drawPoints.currentPoint);\n}\nfunction loadData(dataString) {\n  arrPoints = dataString.split(\"\\n\");\n  localStorage.setItem(\"dataPoint\", JSON.stringify(arrPoints));\n  localStorage.setItem(\"lastPoint\", 0);\n}\n\nfunction draw() {\n  saveData();\n  const prevPoint = +(arrPoints[drawPoints.currentPoint - 1] || 0);\n  const currentPoint = +(arrPoints[drawPoints.currentPoint] || 0);\n  const nextPoint = +(arrPoints[drawPoints.currentPoint + 1] || 0);\n\n  refs.form1Elem.elements.point.value = drawPoints.currentPoint;\n  // drawLine(\n  //   ctx,\n  //   currentPoint,\n  //   nextPoint,\n  //   COUNT_POINTS,\n  //   { x: refs.canvas.width / 2, y: refs.canvas.height / 2 },\n  //   refs.canvas.width / 2 - 5\n  // );\n  ctx.clearRect(0, 0, refs.canvas.width, refs.canvas.height);\n  drawCircle(\n    ctx,\n    refs.canvas.width / 2 - 5,\n    COUNT_POINTS,\n    { x: refs.canvas.width / 2, y: refs.canvas.height / 2 },\n    prevPoint,\n    currentPoint,\n    nextPoint\n  );\n\n  try {\n    speak(arrPoints[drawPoints.currentPoint]);\n  } catch {\n    console.log(\"err\");\n  }\n  drawText(\n    ctx,\n    prevPoint,\n    {\n      x: refs.canvas.width / 2,\n      y: refs.canvas.height / 2 - 200,\n    },\n    40\n  );\n  drawText(ctx, currentPoint, {\n    x: refs.canvas.width / 2,\n    y: refs.canvas.height / 2,\n  });\n  drawText(\n    ctx,\n    nextPoint,\n    {\n      x: refs.canvas.width / 2,\n      y: refs.canvas.height / 2 + 200,\n    },\n    40\n  );\n}\n\nfunction drawText(ctx, point, { x, y }, font = 100) {\n  ctx.fillStyle = \"black\";\n  ctx.font = `${font}px serif`;\n  ctx.textAlign = \"center\";\n  ctx.fillText(point, x, y);\n}\n\nfunction drawCircle(ctx, r, countPoint, center, ...points) {\n  const radian = (Math.PI * 2) / countPoint;\n\n  for (let i = 0; i < countPoint; i++) {\n    let angle = radian * (COUNT_POINTS - (i - Math.round(COUNT_POINTS / 4)));\n    const endPoint = {\n      x: r * Math.sin(angle) + center.x,\n      y: r * Math.cos(angle) + center.y,\n    };\n\n    const minR = i % 10 == 0 ? 4 : 2;\n    ctx.fillStyle = \"black\";\n    ctx.beginPath();\n    ctx.ellipse(endPoint.x, endPoint.y, minR, minR, 0, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  for (let i = 0; i < points.length; i++) {\n    let angle =\n      radian * (COUNT_POINTS - (+points[i] - Math.round(COUNT_POINTS / 4)));\n    const endPoint = {\n      x: r * Math.sin(angle) + center.x,\n      y: r * Math.cos(angle) + center.y,\n    };\n    let minR = 5;\n    switch (i) {\n      case 0:\n        ctx.fillStyle = \"green\";\n        break;\n      case 1:\n        ctx.fillStyle = \"red\";\n        minR = 15;\n        break;\n      case 2:\n        ctx.fillStyle = \"blue\";\n        break;\n    }\n\n    ctx.beginPath();\n    ctx.ellipse(endPoint.x, endPoint.y, minR, minR, 0, 0, Math.PI * 2);\n    ctx.fill();\n  }\n}\n\nfunction drawLine(ctx, currentPoint, nextPoint, countPoint, center, r) {\n  // currentPoint -= 60;\n  // nextPoint -= 60;\n\n  const radian = (Math.PI * 2) / countPoint;\n\n  const startPoint = {\n    x: r * Math.sin(radian * currentPoint) + center.x,\n    y: r * Math.cos(radian * currentPoint) + center.y,\n  };\n  const endPoint = {\n    x: r * Math.sin(radian * nextPoint) + center.x,\n    y: r * Math.cos(radian * nextPoint) + center.y,\n  };\n\n  ctx.beginPath(); // Start a new path\n  ctx.moveTo(startPoint.x, startPoint.y); // Move the pen to (30, 50)\n  ctx.lineTo(endPoint.x, endPoint.y); // Draw a line to (150, 100)\n  ctx.stroke();\n}\n\nfunction setPoint(point) {\n  drawPoints.currentPoint = point;\n  draw();\n}\n\nrefs.btnElems.addEventListener(\"click\", (e) => {\n  if (e.target != e.currentTarget) {\n    const btn = e.target.closest(\"button\");\n    const value = btn.dataset.value;\n\n    if (value == \"prev\") {\n      prevPoint();\n    } else {\n      nextPoint();\n    }\n  }\n});\n\nrefs.canvas.addEventListener(\"click\", () => {\n  nextPoint();\n});\n"],"names":["$23546ebca3bd5893$export$e62e8864abfee904","text","speech","window","speechSynthesis","voice","length","voices","getVoices","i","lang","readme","SpeechSynthesisUtterance","speak","$92ecf229b72c67c2$var$refs","formElem","document","querySelector","form1Elem","canvas","btnElems","$92ecf229b72c67c2$var$ctx","getContext","lineWidth","$92ecf229b72c67c2$var$arrPoints","$92ecf229b72c67c2$var$drawPoints","currentPoint","$92ecf229b72c67c2$var$loadPoint","JSON","parse","localStorage","getItem","Number","$92ecf229b72c67c2$var$draw","$92ecf229b72c67c2$var$nextPoint","$92ecf229b72c67c2$var$prevPoint","setItem","stringify","prevPoint","nextPoint","elements","point","value","clearRect","width","height","ctx","r","countPoint","center","points","radian","Math","PI","angle","round","$92ecf229b72c67c2$var$COUNT_POINTS","endPoint","x","sin","y","cos","minR","fillStyle","beginPath","ellipse","fill","i1","angle1","endPoint1","minR1","$92ecf229b72c67c2$var$drawCircle","console","log","$92ecf229b72c67c2$var$drawText","font","textAlign","fillText","addEventListener","e","preventDefault","data","target","split","$92ecf229b72c67c2$var$setPoint","body","code","currentTarget","closest","dataset"],"version":3,"file":"StringArtBot.28a6d197.js.map"}