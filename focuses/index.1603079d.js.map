{"mappings":"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","sources":["src/focuses/helpers.js","src/focuses/index.js"],"sourcesContent":["export function createCard({ value, suit }, angle = 0) {\n  angle = Math.floor(angle);\n  const isRed = suit === MAST.BUBA || suit === MAST.CHIRVA;\n  return `\n  <div class=\"card ${isRed ? \"red\" : \"\"}\" style=\"top:${angle * 40}px\">\n    <div class=\"top-card\">\n      <div class=\"card-value\">${value}</div>\n      <div class=\"card-suit\">${suit}</div>\n    </div>\n\n    <div class=\"bot-card\">\n      <div class=\"card-value\">${value}</div>\n      <div class=\"card-suit\">${suit}</div>\n    <div>\n    </div>\n  `;\n}\nexport function transformArr(arr) {\n  arr = [...arr];\n  for (let i = 0; i < 100; i++) {\n    const x = Math.round(Math.random() * (arr.length - 1));\n    const y = Math.round(Math.random() * (arr.length - 1));\n    [arr[x], arr[y]] = [arr[y], arr[x]];\n  }\n  return arr;\n}\nexport const MAST = {\n  PIKA: \"♠\",\n  CHIRVA: \"♥\",\n  BUBA: \"♦\",\n  HRESTA: \"♣\",\n};\n","import { createCard, MAST, transformArr } from \"./helpers\";\nconst refs = {\n  containerEl: document.querySelector(\".js-container\"),\n  column_1: document.querySelector('.js-column[data-idx=\"1\"]'),\n  column_2: document.querySelector('.js-column[data-idx=\"2\"]'),\n  column_3: document.querySelector('.js-column[data-idx=\"3\"]'),\n  buttonsList: document.querySelector(\".js-buttons\"),\n  modalEl: document.querySelector(\".js-modal\"),\n};\nconst LEN = 9;\nlet ITERATION = 0;\nlet arr = createCol();\nconst intervalID = [];\nfunction createCol() {\n  const result = [];\n  for (let i = 2; i <= 10; i++) {\n    for (let mast of Object.values(MAST)) {\n      const card = { value: i, suit: mast };\n      result.push(card);\n    }\n  }\n  return result;\n}\n\nfunction render(arr) {\n  while (intervalID.length) clearTimeout(intervalID.pop());\n\n  refs.column_1.innerHTML = \"\";\n  refs.column_2.innerHTML = \"\";\n  refs.column_3.innerHTML = \"\";\n  arr.forEach((el, idx) => {\n    const id = setTimeout(() => {\n      const diff = idx % 3;\n      const markup = createCard(el, idx / 3);\n      refs[`column_${diff + 1}`].insertAdjacentHTML(\"beforeend\", markup);\n    }, 700 * idx);\n    intervalID.push(id);\n  });\n}\n\nfunction focus(column = 0) {\n  if (ITERATION > 4) {\n    return;\n  }\n  shakeArr(column);\n  render(arr);\n  ITERATION++;\n  if (ITERATION === 4) {\n    return renderResult();\n  }\n}\nfunction init() {\n  arr = transformArr(arr).slice(0, LEN * 3);\n}\n\nfunction renderResult() {\n  const idx = Math.floor((LEN * 3) / 2);\n  const markup = createCard(arr[idx]);\n  showModal(markup);\n}\nrefs.buttonsList.addEventListener(\"click\", (e) => {\n  if (e.target === e.currentTarget) return;\n  const column = +e.target.dataset.idx;\n  focus(column);\n});\n\nfunction shakeArr(column = 0) {\n  const part1 = arr.filter((_, i) => i % 3 === 0);\n  const part2 = arr.filter((_, i) => i % 3 === 1);\n  const part3 = arr.filter((_, i) => i % 3 === 2);\n  switch (column) {\n    case 1:\n      arr = [...part2, ...part1, ...part3];\n      break;\n    case 2:\n      arr = [...part3, ...part2, ...part1];\n      break;\n    case 3:\n      arr = [...part1, ...part3, ...part2];\n      break;\n  }\n}\ninit();\nfocus();\n\nfunction showModal(markup) {\n  refs.modalEl.innerHTML = markup;\n  document.body.classList.add(\"show-modal\");\n}\n\nrefs.modalEl.parentElement.addEventListener(\"click\", (e) => {\n  if (e.target !== e.currentTarget) return;\n  document.body.classList.remove(\"show-modal\");\n  reset();\n});\n\nfunction reset() {\n  while (intervalID.length) clearTimeout(intervalID.pop());\n  refs.column_1.innerHTML = \"\";\n  refs.column_2.innerHTML = \"\";\n  refs.column_3.innerHTML = \"\";\n  ITERATION = 0;\n  arr = createCol();\n  init();\n}\n"],"names":["$1355e6b3b1d4c88a$export$b7316deff43c35f7","value","suit","angle","Math","floor","$1355e6b3b1d4c88a$export$2085af31b80cc526","BUBA","CHIRVA","$1355e6b3b1d4c88a$export$c10b96afb65cb23b","arr","i","x","round","random","length","y","PIKA","HRESTA","$22fb2349601a7251$var$refs","containerEl","document","querySelector","column_1","column_2","column_3","buttonsList","modalEl","$22fb2349601a7251$var$ITERATION","$22fb2349601a7251$var$arr","$22fb2349601a7251$var$createCol","$22fb2349601a7251$var$intervalID","result","mast","Object","values","card","push","$22fb2349601a7251$var$focus","column","part1","filter","_","part2","part3","$22fb2349601a7251$var$shakeArr","clearTimeout","pop","innerHTML","forEach","el","idx","id","setTimeout","diff","markup","insertAdjacentHTML","$22fb2349601a7251$var$render","$22fb2349601a7251$var$LEN","body","classList","add","$22fb2349601a7251$var$showModal","$22fb2349601a7251$var$renderResult","$22fb2349601a7251$var$init","slice","addEventListener","e","target","currentTarget","dataset","parentElement","remove","$22fb2349601a7251$var$reset"],"version":3,"file":"index.1603079d.js.map"}